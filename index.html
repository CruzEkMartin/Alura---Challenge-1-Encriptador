<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
    <title>Challenge ONE Sprint 01 - Encriptador JS</title>
</head>

<body>
    <header>
        <img class="logo" src="img/logo.png" alt="">
    </header>

    <main class="main">

        <section class="seccion-mensaje">

            <textarea class="texto" name="texto" id="texto" cols="30" rows="6"
                placeholder="Ingrese el texto aqui"></textarea>

            <div>
                <h6 class="aviso">Solo letras minúsculas y sin acentos</h6>
            </div>

            <div class="botones">
                <input value="Encriptar" class="boton-encriptar" type="button" id="encriptar" onclick="encriptar()">
                <input value="Desencriptar" class="boton-desencriptar" type="button" id="desencriptar"
                    onclick="desencriptar()">
            </div>

        </section>

        <section class="seccion-resultado">
            <div class="mensaje" id="mensaje">
                <img src="img/Munieco.png" alt="" id="munieco">
                <div class="mensaje-salida" id="mensaje-salida">
                    <h2>Ningún mensaje fue encontrado</h2>
                    <p>Ingresa el texto que desees encriptar o desencriptar.</p>
                </div>
            </div>

            <div class="encriptado" id="encriptado">
                <textarea class="salida" name="salida" id="salida" cols="20" rows="7"></textarea>
                <input value="Copiar" class="boton-copiar" type="button" id="copiar" onclick="portapapeles()">
            </div>

        </section>
    </main>

    <footer></footer>


    <script>

        //al inicio ocultamos el cuadro para el texto encriptado
        window.onload = function () {
            document.getElementById("encriptado").style.display = 'none';
        }

        //solo minúsculas y sin acento
        document.getElementById("texto").addEventListener("keypress", verificar);
        function verificar(e) {
            if (e.key.match(/[a-zñ\s]/i) === null) {
                e.preventDefault();
            }
        }

        function encriptar() {
            //Obtenemos lo que está escrito en el textarea de seccion-mensaje
            let texto = document.getElementById("texto").value;
            let salida = document.getElementById("salida");
            let encriptado = "";

            //sustuimos los valores para encriptar
            if (texto.length != 0) {
                encriptado = texto
                    .replace(/e/gi, "enter")
                    .replace(/i/gi, "imes")
                    .replace(/a/gi, "ai")
                    .replace(/o/gi, "ober")
                    .replace(/u/gi, "ufat");

                //enviamos el resultado
                salida.value = encriptado;
                //lo mostramos en el textarea correspondiente
                document.getElementById("mensaje").style.display = 'none';
                document.getElementById("encriptado").style.display = 'block';
            }
            else {
                alert("Debes ingresar un texto");
            }
        }

        function desencriptar() {
            //Obtenemos lo que está escrito en el textarea de seccion-mensaje
            let texto = document.getElementById("texto").value;
            let salida = document.getElementById("salida");
            let desencriptado = "";

            //sustuimos los valores para desencriptar
            if (texto.length != 0) {
                desencriptado = texto
                    .replace(/enter/gi, "e")
                    .replace(/imes/gi, "i")
                    .replace(/ai/gi, "a")
                    .replace(/ober/gi, "o")
                    .replace(/ufat/gi, "u");

                //enviamos el resultado
                salida.value = desencriptado;
                //lo mostramos en el textarea correspondiente
                document.getElementById("mensaje").style.display = 'none';
                document.getElementById("encriptado").style.display = 'block';
            }
            else {
                alert("Debes ingresar un texto");
            }
        }

        function portapapeles() {
            let contenido = document.getElementById("salida");
            contenido.select();
            navigator.clipboard.writeText(contenido.value);
        }


    </script>
</body>

</html>